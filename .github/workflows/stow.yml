name: integration test

on: [push]

jobs:
  stow:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@8e8c483db84b4bee98b60c0593521ed34d9990e8 # v6
      with:
        path: dotfiles
    - name: Set up Homebrew
      id: set-up-homebrew
      uses: Homebrew/actions/setup-homebrew@main
    - name: Install stow
      run: brew install stow
    - name: Run Install.sh
      run: |
        pushd dotfiles
        echo "-vv" >> .stowrc
        HOME=${GITHUB_WORKSPACE} ./INSTALL.sh
        popd
